<html>
	<head>
		<title>http-auth tests</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<style>body {
    margin: 0;
    padding: 0;
    font: 14px/1.5 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    color: #252519;
}
a {
    color: #252519;
}
a:hover {
    text-decoration: underline;
    color: #19469D;
}
p {
    margin: 12px 0;
}
h1, h2, h3 {
    margin: 0;
    padding: 0;
}
table#source {
    width: 100%;
    border-collapse: collapse;
}
table#source td:first-child {
    padding: 30px 40px 30px 40px;
    vertical-align: top;
}
table#source td:first-child,
table#source td:first-child pre {
    width: 450px;
}
table#source td:last-child {
    padding: 30px 0 30px 40px;
    border-left: 1px solid #E5E5EE;
    background: #F5F5FF;
}
table#source tr {
    border-bottom: 1px solid #E5E5EE;
}
table#source tr.filename {
    padding-top: 40px;
    border-top: 1px solid #E5E5EE;
}
table#source tr.filename td:first-child {
    text-transform: capitalize;
}
table#source tr.filename td:last-child {
    font-size: 12px;
}
table#source tr.filename h2 {
    margin: 0;
    padding: 0;
    cursor: pointer;
}
table#source tr.code h1,
table#source tr.code h2,
table#source tr.code h3 {
    margin-top: 30px;
    font-family: "Lucida Grande", "Helvetica Nueue", Arial, sans-serif;
    font-size: 18px;
}
table#source tr.code h2 {
    font-size: 16px;
}
table#source tr.code h3 {
    font-size: 14px;
}
table#source tr.code ul {
    margin: 15px 0 15px 35px;
    padding: 0;
}
table#source tr.code ul li {
    margin: 0;
    padding: 1px 0;
}
table#source tr.code ul li p {
    margin: 0;
    padding: 0;
}
table#source tr.code td:first-child pre {
    padding: 20px;
}
#ribbon {
    position: fixed;
    top: 0;
    right: 0;
}
code .string { color: #219161; }
code .regexp { color: #219161; }
code .keyword { color: #954121; }
code .number { color: #19469D; }
code .comment { color: #bbb; }
code .this { color: #19469D; }</style>
		<script>
			$(function(){
				$('tr.code').hide();
				$('tr.filename').toggle(function(){
					$(this).nextUntil('.filename').fadeIn();
				}, function(){
					$(this).nextUntil('.filename').fadeOut();
				});
			});
		</script>
	</head>
	<body>
<table id="source"><tbody><tr><td><h1>http-auth tests</h1><p>Node.js package for HTTP basic and digest access authentication.</p></td><td></td></tr><tr class="filename"><td><h2 id="tests/test-options.js"><a href="#">test-options</a></h2></td><td>tests/test-options.js</td></tr><tr class="code">
<td class="docs">
<p>Options module.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">opt</span> = <span class="variable">require</span>(<span class="string">'../lib/options'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Utils module.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">utils</span> = <span class="variable">require</span>(<span class="string">'../lib/utils'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for empty options.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testEmptyOptions'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for empty options.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span> () { 
		<span class="variable">opt</span>(); 
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">options</span> <span class="variable">are</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for invalid authType.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testInvalidAuthType'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for invalid authType error.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span> () { 
		<span class="variable">opt</span>({<span class="variable">authType</span> : <span class="string">'some other type'</span>}); 
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">authType</span> <span class="variable">is</span> <span class="variable">invalid</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for default authType.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testDefaultAuthType'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for default authType.</span>
	<span class="keyword">var</span> <span class="variable">options</span> = <span class="variable">opt</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">digest</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'aa2sdas:s3sss'</span>, <span class="string">'gi33ra:makaura'</span>]			
	});
	<span class="comment">// Default authType check.</span>
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authType</span>, <span class="string">'digest'</span>, &<span class="variable">quot</span>;<span class="class">Default</span> <span class="variable">authType</span> <span class="variable">must</span> <span class="variable">be</span> <span class="variable">digest</span>!&<span class="variable">quot</span>;)
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for invalid algorithm.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testInvalidAlgo'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for invalid algorithm error.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span> () { 
		<span class="variable">opt</span>({
			<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">digest</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
			<span class="variable">authList</span> : [<span class="string">'asdasw:ssqss'</span>, <span class="string">'gidra:maakura'</span>],
			<span class="variable">algorithm</span> : <span class="string">'monkeyCrypt'</span>			
		}); 
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">algorithm</span> <span class="variable">is</span> <span class="variable">invalid</span>!&<span class="variable">quot</span>;);	
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for default algorithm.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testDefaultAlgo'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for default algorithm.</span>
	<span class="keyword">var</span> <span class="variable">options</span> = <span class="variable">opt</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">digest</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'aa2sdasa:s3s2ss'</span>, <span class="string">'gi3q3ra:mwakaura'</span>]			
	});
	<span class="comment">// Default algorithm check.</span>
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">algorithm</span>, <span class="string">'MD5'</span>, &<span class="variable">quot</span>;<span class="class">Default</span> <span class="variable">algorithm</span> <span class="variable">must</span> <span class="variable">be</span> <span class="class">MD5</span>!&<span class="variable">quot</span>;)
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for invalid realm.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testInvalidRealm'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for invalid realm error.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span> () { 
		<span class="variable">opt</span>({
			<span class="variable">authRealm</span> : &<span class="variable">quot</span>;&<span class="variable">quot</span>;,
			<span class="variable">authList</span> : [<span class="string">'asdasw:ssqss'</span>, <span class="string">'gidra:maakura'</span>]	
		}); 
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">authRealm</span> <span class="variable">is</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);	
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for empty authList.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testInvalidAuthList'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for invalid authList error.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span> () { 
		<span class="variable">opt</span>({
			<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Some</span> <span class="variable">realm</span>&<span class="variable">quot</span>;,
			<span class="variable">authList</span> : []			
		}); 
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">authList</span> <span class="variable">is</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);	
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for valid authList - digest.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testValidAuthListDigest'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for valid authList.</span>
	<span class="keyword">var</span> <span class="variable">options</span> = <span class="variable">opt</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Some</span> <span class="variable">realm</span>&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'karo:seed'</span>, <span class="string">'samvel:beed'</span>]			
	});
	<span class="comment">// Checking not empty.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="variable">authUsers</span> <span class="variable">must</span> <span class="variable">not</span> <span class="variable">be</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);		
	<span class="comment">// Checking for items.</span>
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="string">'karo'</span>], <span class="string">'karo:Some realm:seed'</span>, &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="string">'samvel'</span>], <span class="string">'samvel:Some realm:beed'</span>, &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for valid authList - basic.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testValidAuthListBasic'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for valid authList.</span>
	<span class="keyword">var</span> <span class="variable">options</span> = <span class="variable">opt</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Some</span> <span class="variable">realm</span>&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'karo:seed'</span>, <span class="string">'samvel:beed'</span>],
		<span class="variable">authType</span> : <span class="string">'basic'</span>
	});
	<span class="comment">// Checking not empty.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="variable">authUsers</span> <span class="variable">must</span> <span class="variable">not</span> <span class="variable">be</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);		
	<span class="comment">// Checking for items.</span>
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="number integer">0</span>], <span class="variable">utils</span>.<span class="variable">base64</span>(<span class="string">'karo:seed'</span>), &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="number integer">1</span>], <span class="variable">utils</span>.<span class="variable">base64</span>(<span class="string">'samvel:beed'</span>), &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for valid authFile.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testValidAuthFile'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for valid authFile.</span>
	<span class="keyword">var</span> <span class="variable">options</span> = <span class="variable">opt</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Some</span> <span class="variable">realm</span>&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'karo:seed'</span>, <span class="string">'samvel:beed'</span>],
		<span class="variable">authFile</span> : <span class="variable">__dirname</span> + <span class="string">'/../examples/users.htpasswd'</span>,
		<span class="variable">authType</span> : <span class="string">'basic'</span>
	});
	<span class="comment">// Checking not empty.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="variable">authUsers</span> <span class="variable">must</span> <span class="variable">not</span> <span class="variable">be</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);		
	<span class="comment">// Checking for items.</span>
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="number integer">0</span>], <span class="variable">utils</span>.<span class="variable">base64</span>(<span class="string">'Sarah:testpass'</span>), &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="number integer">1</span>], <span class="variable">utils</span>.<span class="variable">base64</span>(<span class="string">'John:itismypass'</span>), &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="number integer">2</span>], <span class="variable">utils</span>.<span class="variable">base64</span>(<span class="string">'Shanon:noneof'</span>), &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="variable">test</span>.<span class="variable">equals</span>(<span class="variable">options</span>.<span class="variable">authUsers</span>[<span class="number integer">3</span>], <span class="variable">utils</span>.<span class="variable">base64</span>(<span class="string">'Mike:pass123'</span>), &<span class="variable">quot</span>;<span class="class">User</span> <span class="variable">item</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="tests/test-http-auth.js"><a href="#">test-http-auth</a></h2></td><td>tests/test-http-auth.js</td></tr><tr class="code">
<td class="docs">
<p>HTTP authentication module.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">auth</span> = <span class="variable">require</span>(<span class="string">'../lib/http-auth'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for basic access authentication.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testBasicAuth'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Requests basic access authentication instance.</span>
	<span class="keyword">var</span> <span class="variable">basic</span> = <span class="variable">auth</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">basic</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'Shi:many222'</span>, <span class="string">'Lota:123456'</span>],
		<span class="variable">authType</span> : <span class="string">'basic'</span>
	});
	<span class="comment">// Checking instance itself.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">basic</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Basic</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">is</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Checking apply method.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">basic</span>.<span class="variable">apply</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Basic</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">has</span> <span class="variable">no</span> <span class="variable">apply</span> <span class="variable">method</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for digest access authentication.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testDigestAuth'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Requests digest access authentication instance.</span>
	<span class="keyword">var</span> <span class="variable">digest</span> = <span class="variable">auth</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">digest</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'2Shi:ma22y222'</span>, <span class="string">'3Lota:1123456'</span>],
		<span class="variable">authType</span> : <span class="string">'digest'</span>
	});
	<span class="comment">// Checking instance itself.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">digest</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Digest</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">is</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Checking apply method.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">digest</span>.<span class="variable">apply</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Digest</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">has</span> <span class="variable">no</span> <span class="variable">apply</span> <span class="variable">method</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="tests/test-provider.js"><a href="#">test-provider</a></h2></td><td>tests/test-provider.js</td></tr><tr class="code">
<td class="docs">
<p>Provider module.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">provider</span> = <span class="variable">require</span>(<span class="string">'../lib/provider'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for valid basic access authentication.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testValidBasicAuth'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Requests basic access authentication instance.</span>
	<span class="keyword">var</span> <span class="variable">basic</span> = <span class="variable">provider</span>.<span class="variable">newInstance</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">basic</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'Kuka:pi2'</span>, <span class="string">'suma:kramoke'</span>],
		<span class="variable">authType</span> : <span class="string">'basic'</span>
	});
	<span class="comment">// Checking instance itself.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">basic</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Basic</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">is</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Checking apply method.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">basic</span>.<span class="variable">apply</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Basic</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">has</span> <span class="variable">no</span> <span class="variable">apply</span> <span class="variable">method</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for valid digest access authentication.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testValidDigestAuth'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Requests digest access authentication instance.</span>
	<span class="keyword">var</span> <span class="variable">digest</span> = <span class="variable">provider</span>.<span class="variable">newInstance</span>({
		<span class="variable">authRealm</span> : &<span class="variable">quot</span>;<span class="class">Private</span> <span class="variable">area</span> <span class="keyword">with</span> <span class="variable">digest</span> <span class="variable">access</span> <span class="variable">authentication</span>.&<span class="variable">quot</span>;,
		<span class="variable">authList</span> : [<span class="string">'asdas:ssss'</span>, <span class="string">'gira:makura'</span>],
		<span class="variable">authType</span> : <span class="string">'digest'</span>
	});
	<span class="comment">// Checking instance itself.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">digest</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Digest</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">is</span> <span class="variable">empty</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Checking apply method.</span>
	<span class="variable">test</span>.<span class="variable">notEqual</span>(<span class="variable">digest</span>.<span class="variable">apply</span>, <span class="keyword">null</span>, &<span class="variable">quot</span>;<span class="class">Digest</span> <span class="variable">access</span> <span class="variable">authentication</span> <span class="variable">instance</span> <span class="variable">has</span> <span class="variable">no</span> <span class="variable">apply</span> <span class="variable">method</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for empty options.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testInvalidAuthOptions'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for null options.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span>() {
		<span class="variable">provider</span>.<span class="variable">newInstance</span>();
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">no</span> <span class="variable">options</span> <span class="variable">are</span> <span class="variable">provided</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Test for invalid authType.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testInvalidAuthType'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking for wrong authType.</span>
	<span class="variable">test</span>.<span class="variable">throws</span>(<span class="keyword">function</span> () { 
		<span class="variable">provider</span>.<span class="variable">newInstance</span>({<span class="variable">authType</span> : <span class="string">'some type'</span>}); 
	}, <span class="class">Error</span>, &<span class="variable">quot</span>;<span class="class">Must</span> <span class="keyword">throw</span> <span class="variable">an</span> <span class="variable">error</span> <span class="variable">when</span> <span class="variable">authType</span> <span class="variable">is</span> <span class="variable">wrong</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="tests/test-utils.js"><a href="#">test-utils</a></h2></td><td>tests/test-utils.js</td></tr><tr class="code">
<td class="docs">
<p>Utility module.
 </p>
</td>
<td class="code">
<pre><code><span class="keyword">var</span> <span class="variable">utils</span> = <span class="variable">require</span>(<span class="string">'../lib/utils'</span>);</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Base64 test with ASCII.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testBase64ASCII'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking encoded string.</span>
	<span class="variable">test</span>.<span class="variable">equal</span>(<span class="variable">utils</span>.<span class="variable">base64</span>(&<span class="variable">quot</span>;<span class="variable">some</span> <span class="variable">text</span>&<span class="variable">quot</span>;), &<span class="variable">quot</span>;<span class="variable">c29tZSB0ZXh0</span>&<span class="variable">quot</span>;, &<span class="variable">quot</span>;<span class="class">ASCII</span> <span class="variable">string</span> <span class="variable">is</span> <span class="variable">not</span> <span class="variable">encoded</span> <span class="variable">correctly</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Base64 test with unicode.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testBase64Unicode'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking encoded string.</span>
	<span class="variable">test</span>.<span class="variable">equal</span>(<span class="variable">utils</span>.<span class="variable">base64</span>(&<span class="variable">quot</span>;այսպես&<span class="variable">quot</span>;), &<span class="variable">quot</span>;<span class="variable">aHVtdW91brVpdW9</span>&<span class="variable">quot</span>;, &<span class="variable">quot</span>;<span class="class">Unicode</span> <span class="variable">string</span> <span class="variable">is</span> <span class="variable">not</span> <span class="variable">encoded</span> <span class="variable">correctly</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>MD5 test with ASCII.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testMD5ASCII'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking generated hash.</span>
	<span class="variable">test</span>.<span class="variable">equal</span>(<span class="variable">utils</span>.<span class="variable">base64</span>(&<span class="variable">quot</span>;<span class="variable">other</span> <span class="variable">text</span>&<span class="variable">quot</span>;), &<span class="variable">quot</span>;<span class="variable">b3RoZXIgdGV4dA</span>==&<span class="variable">quot</span>;, &<span class="variable">quot</span>;<span class="class">MD5</span> <span class="variable">hash</span> <span class="variable">is</span> <span class="variable">not</span> <span class="variable">correct</span> <span class="keyword">for</span> <span class="class">ASCII</span> <span class="variable">string</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>MD5 test with unicode.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">exports</span>[<span class="string">'testMD5Unicode'</span>] = <span class="keyword">function</span> (<span class="variable">test</span>) {
	<span class="comment">// Checking generated hash.</span>
	<span class="variable">test</span>.<span class="variable">equal</span>(<span class="variable">utils</span>.<span class="variable">base64</span>(&<span class="variable">quot</span>;այնպես&<span class="variable">quot</span>;), &<span class="variable">quot</span>;<span class="variable">aHVtdW21brVpdW9</span>&<span class="variable">quot</span>;, &<span class="variable">quot</span>;<span class="class">MD5</span> <span class="variable">hash</span> <span class="variable">is</span> <span class="variable">not</span> <span class="variable">correct</span> <span class="keyword">for</span> <span class="variable">unicode</span> <span class="variable">string</span>!&<span class="variable">quot</span>;);
	<span class="comment">// Test is done.</span>
	<span class="variable">test</span>.<span class="variable">done</span>();
};</code></pre>
</td>
</tr>	</body>
</html></tbody></table>